// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
// Package templates provides Templ components for the Review service workspace UI.

package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import "strconv"

// WorkspaceProps contains the data needed to render the workspace.
type WorkspaceProps struct {
	SessionID      int
	Title          string
	Code           string
	CurrentMode    string
	AnalysisResult string
}

// Workspace renders the two-pane layout for code review with dynamic mode switching.
// Left pane: Editable code textarea
// Right pane: AI analysis results that update via HTMX based on selected mode
func Workspace(props WorkspaceProps) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"workspace-container min-h-screen bg-gray-50 dark:bg-gray-900\"><!-- Workspace Header --><header class=\"workspace-header border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-800 px-6 py-4\"><div class=\"flex items-center justify-between\"><div class=\"flex-1\"><h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(props.Title)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `apps/review/templates/workspace.templ`, Line: 25, Col: 80}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "</h1><p class=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">Session #")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(strconv.Itoa(props.SessionID))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `apps/review/templates/workspace.templ`, Line: 26, Col: 103}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</p></div><!-- Mode Selector and Analyze Button --><div class=\"flex items-center gap-4 flex-wrap\"><label for=\"mode-selector\" class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Reading Mode:</label> <select id=\"mode-selector\" name=\"mode\" class=\"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent\" aria-label=\"Select reading mode for code analysis\" onchange=\"toggleScanQueryInput(); updateModeGauge();\"><option value=\"preview\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.CurrentMode == "preview" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, ">üëÅÔ∏è Preview</option> <option value=\"skim\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.CurrentMode == "skim" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, ">‚ö° Skim</option> <option value=\"scan\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.CurrentMode == "scan" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, ">üîé Scan</option> <option value=\"detailed\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.CurrentMode == "detailed" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, ">üî¨ Detailed</option> <option value=\"critical\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.CurrentMode == "critical" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, ">‚ö†Ô∏è Critical</option></select><!-- Mode gauge: small 1-5 bar indicator (battery/cell style) --><div id=\"mode-gauge\" class=\"flex items-center gap-1 ml-2\" aria-hidden=\"true\" title=\"Estimated effort gauge\"><span data-index=\"1\" class=\"w-6 h-2 rounded bg-gray-300 dark:bg-gray-700\"></span> <span data-index=\"2\" class=\"w-6 h-2 rounded bg-gray-300 dark:bg-gray-700\"></span> <span data-index=\"3\" class=\"w-6 h-2 rounded bg-gray-300 dark:bg-gray-700\"></span> <span data-index=\"4\" class=\"w-6 h-2 rounded bg-gray-300 dark:bg-gray-700\"></span> <span data-index=\"5\" class=\"w-6 h-2 rounded bg-gray-300 dark:bg-gray-700\"></span></div><!-- Model Selector --><div class=\"flex items-center gap-2 ml-4\"><label for=\"model-selector\" class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Model:</label> <select id=\"model-selector\" name=\"model\" class=\"px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent\" aria-label=\"Select AI model for analysis\"><option value=\"mistral:7b-instruct\" selected>Mistral 7B (Default)</option></select></div><!-- Scan Mode Query Input (Hidden by default, shown only for Scan mode) --><div id=\"scan-query-container\" class=\"hidden flex items-center gap-2\"><label for=\"scan-query\" class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Search for:</label> <input type=\"text\" id=\"scan-query\" placeholder=\"e.g., authentication, SQL queries, error handling...\" class=\"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent min-w-[300px]\" aria-label=\"Enter search query for Scan mode\"></div><!-- Analyze Button with Dynamic Endpoint --><button id=\"analyze-btn\" type=\"button\" class=\"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 text-white font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800\" onclick=\"analyzeCode()\" aria-label=\"Analyze code with selected reading mode\">Analyze Code</button></div></div></header><!-- Two-Pane Layout --><div class=\"workspace-content flex h-[calc(100vh-120px)]\"><!-- Left Pane: Editable Code --><div class=\"code-pane flex-1 border-r border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-800 overflow-hidden flex flex-col\"><div class=\"code-header px-6 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900\"><div class=\"flex items-center justify-between\"><h2 class=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">Code</h2><div class=\"flex items-center gap-2\"><span id=\"char-count\" class=\"text-xs text-gray-500 dark:text-gray-400\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var5 string
			templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(strconv.Itoa(len(props.Code)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `apps/review/templates/workspace.templ`, Line: 102, Col: 110}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, " characters</span> <button type=\"button\" class=\"px-3 py-1 text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors\" onclick=\"copyCodeToClipboard()\" aria-label=\"Copy code to clipboard\">üìã Copy</button> <button type=\"button\" class=\"px-3 py-1 text-xs bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors\" onclick=\"clearCode()\" aria-label=\"Clear code\">üóëÔ∏è Clear</button></div></div></div><div class=\"code-content flex-1 overflow-hidden\"><textarea id=\"code-editor\" class=\"w-full h-full p-6 text-sm font-mono text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800 border-none focus:outline-none focus:ring-0 resize-none\" placeholder=\"Paste or type your code here...\" spellcheck=\"false\" aria-label=\"Code editor\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var6 string
			templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(props.Code)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `apps/review/templates/workspace.templ`, Line: 129, Col: 19}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "</textarea></div></div><!-- Right Pane: Analysis Results --><div class=\"analysis-pane flex-1 bg-gray-50 dark:bg-gray-900 overflow-hidden\"><div class=\"analysis-header px-6 py-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\"><div class=\"flex items-center justify-between\"><h2 class=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">AI Analysis</h2><!-- Loading Indicator --><div id=\"analysis-loading\" class=\"hidden flex items-center gap-2\"><svg class=\"animate-spin h-4 w-4 text-indigo-600 dark:text-indigo-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg> <span class=\"text-xs text-gray-600 dark:text-gray-400\">Analyzing...</span></div></div></div><div id=\"analysis-pane\" class=\"analysis-content overflow-auto h-full p-6\" role=\"region\" aria-label=\"AI analysis results\" aria-live=\"polite\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.AnalysisResult != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "<!-- Analysis results will be injected here via JavaScript --> <div class=\"p-4 rounded-lg bg-indigo-50 dark:bg-indigo-900 border border-indigo-200 dark:border-indigo-700\"><pre class=\"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(props.AnalysisResult)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `apps/review/templates/workspace.templ`, Line: 158, Col: 104}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "</pre></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "<!-- Empty state --> <div class=\"flex flex-col items-center justify-center h-full text-center\"><svg class=\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg><h3 class=\"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2\">No Analysis Yet</h3><p class=\"text-sm text-gray-500 dark:text-gray-400 max-w-md\">Select a reading mode from the dropdown above and click \"Analyze Code\" to start AI-powered code analysis.</p><div class=\"mt-6 space-y-2 text-left text-sm text-gray-600 dark:text-gray-400\"><p>üìñ <strong>Preview:</strong> Quick structural overview</p><p>‚ö° <strong>Skim:</strong> Abstractions and key components</p><p>üîé <strong>Scan:</strong> Search for specific patterns</p><p>üî¨ <strong>Detailed:</strong> Line-by-line explanation</p><p>‚ö†Ô∏è <strong>Critical:</strong> Quality review and issues</p></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "</div></div></div></div><!-- Workspace JavaScript --> <script>\n\t\t\t// Enable debug logging only in development mode\n\t\t\tconst DEBUG_ENABLED = window.location.hostname === 'localhost' || \n\t\t\t\t\t\t\t\t  window.location.hostname === '127.0.0.1' ||\n\t\t\t\t\t\t\t\t  window.DEBUG_ENABLED === true;\n\n\t\t\t// Internal debug logger - only logs if DEBUG_ENABLED\n\t\t\tfunction _debug(message, ...args) {\n\t\t\t\tif (DEBUG_ENABLED) {\n\t\t\t\t\tconsole.log(`[Review] ${message}`, ...args);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction _error(message, ...args) {\n\t\t\t\tif (DEBUG_ENABLED) {\n\t\t\t\t\tconsole.error(`[Review] ${message}`, ...args);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction _warn(message, ...args) {\n\t\t\t\tif (DEBUG_ENABLED) {\n\t\t\t\t\tconsole.warn(`[Review] ${message}`, ...args);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update character count on input\n\t\t\tconst codeEditor = document.getElementById('code-editor');\n\t\t\tconst charCount = document.getElementById('char-count');\n\t\t\t\n\t\t\tcodeEditor.addEventListener('input', () => {\n\t\t\t\tcharCount.textContent = codeEditor.value.length + ' characters';\n\t\t\t});\n\t\t\t\n\t\t\t// Toggle Scan query input visibility\n\t\t\tfunction toggleScanQueryInput() {\n\t\t\t\tconst mode = document.getElementById('mode-selector').value;\n\t\t\t\tconst scanQueryContainer = document.getElementById('scan-query-container');\n\t\t\t\t\n\t\t\t\tif (mode === 'scan') {\n\t\t\t\t\tscanQueryContainer.classList.remove('hidden');\n\t\t\t\t\tscanQueryContainer.classList.add('flex');\n\t\t\t\t} else {\n\t\t\t\t\tscanQueryContainer.classList.add('hidden');\n\t\t\t\t\tscanQueryContainer.classList.remove('flex');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update the small mode gauge (1-5 bars) next to the selector\n\t\t\tfunction updateModeGauge() {\n\t\t\t\tconst mode = document.getElementById('mode-selector').value;\n\t\t\t\tconst mapping = {\n\t\t\t\t\t'preview': 1,\n\t\t\t\t\t'scan': 2,\n\t\t\t\t\t'skim': 2,\n\t\t\t\t\t'detailed': 4,\n\t\t\t\t\t'critical': 5\n\t\t\t\t};\n\t\t\t\tconst level = mapping[mode] || 1;\n\t\t\t\tconst gauge = document.getElementById('mode-gauge');\n\t\t\t\tif (!gauge) return;\n\t\t\t\tconst bars = gauge.querySelectorAll('[data-index]');\n\t\t\t\tbars.forEach((bar) => {\n\t\t\t\t\tconst idx = Number(bar.getAttribute('data-index'));\n\t\t\t\t\tif (idx <= level) {\n\t\t\t\t\t\tbar.classList.remove('bg-gray-300', 'dark:bg-gray-700');\n\t\t\t\t\t\tbar.classList.add('bg-indigo-600', 'dark:bg-indigo-400');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbar.classList.remove('bg-indigo-600', 'dark:bg-indigo-400');\n\t\t\t\t\t\tbar.classList.add('bg-gray-300', 'dark:bg-gray-700');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\t\n\t\t// Initialize scan query input visibility on page load\n\t\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\t\ttoggleScanQueryInput();\n\t\t\tupdateModeGauge();\n\t\t\tloadAvailableModels();\n\t\t});\n\t\t\n\t\t// Load available models from API\n\t\tfunction loadAvailableModels() {\n\t\t\tfetch('/api/review/models')\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(data => {\n\t\t\t\t\tconst modelSelector = document.getElementById('model-selector');\n\t\t\t\t\tif (!modelSelector || !data.models || data.models.length === 0) {\n\t\t\t\t\t\t_warn('No models available or selector not found');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Clear existing options\n\t\t\t\t\tmodelSelector.innerHTML = '';\n\t\t\t\t\t\n\t\t\t\t\t// Add models dynamically\n\t\t\t\t\tdata.models.forEach((model, index) => {\n\t\t\t\t\t\tconst option = document.createElement('option');\n\t\t\t\t\t\toption.value = model.name;\n\t\t\t\t\t\toption.textContent = model.name + (model.description ? ' - ' + model.description : '');\n\t\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t\toption.selected = true; // Select first model as default\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmodelSelector.appendChild(option);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t_debug('Loaded models from Ollama', { count: data.models.length });\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\t_error('Failed to load models:', error);\n\t\t\t\t\t// Keep hardcoded fallback options if fetch fails\n\t\t\t\t});\n\t\t}\t\t\t// Copy code to clipboard\n\t\t\tfunction copyCodeToClipboard() {\n\t\t\t\tconst code = codeEditor.value;\n\t\t\t\tif (navigator.clipboard && navigator.clipboard.writeText) {\n\t\t\t\t\tnavigator.clipboard.writeText(code).then(() => {\n\t\t\t\t\t\tshowToast('‚úì Copied to clipboard');\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t_error('Failed to copy:', err);\n\t\t\t\t\t\tshowToast('‚úó Failed to copy');\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback\n\t\t\t\t\tcodeEditor.select();\n\t\t\t\t\tdocument.execCommand('copy');\n\t\t\t\t\tshowToast('‚úì Copied to clipboard');\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Clear code\n\t\t\tfunction clearCode() {\n\t\t\t\tif (confirm('Clear all code?')) {\n\t\t\t\t\tcodeEditor.value = '';\n\t\t\t\t\tcharCount.textContent = '0 characters';\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Analyze code with selected mode\n\t\t\tfunction analyzeCode() {\n\t\t\t\tconst mode = document.getElementById('mode-selector').value;\n\t\t\t\t// CRITICAL: Always read fresh value from textarea DOM element\n\t\t\t\tconst code = document.getElementById('code-editor').value.trim();\n\t\t\t\t\n\t\t\t\t_debug('Analyze clicked', { mode, codeLength: code.length, preview: code.substring(0, 100) });\n\t\t\t\t\n\t\t\t\tif (!code) {\n\t\t\t\t\tshowToast('‚ö†Ô∏è Please paste some code first');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t// For Scan mode, get the query\n\t\t\tlet scanQuery = '';\n\t\t\tif (mode === 'scan') {\n\t\t\t\tscanQuery = document.getElementById('scan-query').value.trim();\n\t\t\t\tif (!scanQuery) {\n\t\t\t\t\tshowToast('‚ö†Ô∏è Please enter what you want to scan for');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_debug('Scan query', { scanQuery });\n\t\t\t}\n\n\t\t\t// Get selected model\n\t\t\tconst modelSelector = document.getElementById('model-selector');\n\t\t\tconst selectedModel = modelSelector ? modelSelector.value : 'mistral:7b-instruct';\n\t\t\t_debug('Selected model', { selectedModel });\n\t\t\t\n\t\t\tconst analysisPane = document.getElementById('analysis-pane');\n\t\t\tconst loadingIndicator = document.getElementById('analysis-loading');\n\t\t\tconst analyzeBtn = document.getElementById('analyze-btn');\n\t\t\t\n\t\t\t// Show loading state\n\t\t\tloadingIndicator.classList.remove('hidden');\n\t\t\tanalyzeBtn.disabled = true;\n\t\t\tanalyzeBtn.textContent = 'Analyzing...';\n\t\t\tanalysisPane.innerHTML = '<div class=\"flex items-center justify-center h-full\"><div class=\"text-center\"><svg class=\"animate-spin h-8 w-8 text-indigo-600 dark:text-indigo-400 mx-auto mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg><p class=\"text-sm text-gray-600 dark:text-gray-400\">Running ' + mode + ' analysis...</p></div></div>';\n\t\t\t\n\t\t\t// Make API call to correct mode endpoint\n\t\t\tlet endpoint = '/api/review/modes/' + mode;\n\t\t\tif (mode === 'scan' && scanQuery) {\n\t\t\t\tendpoint += '?query=' + encodeURIComponent(scanQuery);\n\t\t\t}\n\t\t\t\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('pasted_code', code);\n\t\t\tformData.append('model', selectedModel);\n\t\t\t\n\t\t\t_debug('Sending analysis request', { endpoint, model: selectedModel });\n\t\t\t\n\t\t\tfetch(endpoint, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData\n\t\t\t\t})\n\t\t\t\t.then(response => {\n\t\t\t\t\t_debug('Analysis response received', { status: response.status });\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\tthrow new Error('Analysis failed: ' + response.statusText);\n\t\t\t\t\t}\n\t\t\t\t\treturn response.text();\n\t\t\t\t})\n\t\t\t\t.then(html => {\n\t\t\t\t\t_debug('Analysis complete', { responseLength: html.length });\n\t\t\t\t\tanalysisPane.innerHTML = html;\n\t\t\t\t\tshowToast('‚úì Analysis complete');\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\t_error('Analysis error:', error);\n\t\t\t\t\tanalysisPane.innerHTML = '<div class=\"p-4 rounded-lg bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700\"><h4 class=\"font-semibold text-red-900 dark:text-red-100\">Analysis Failed</h4><p class=\"mt-2 text-sm text-red-800 dark:text-red-200\">' + error.message + '</p><button onclick=\"analyzeCode()\" class=\"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm\">Retry</button></div>';\n\t\t\t\t\tshowToast('‚úó Analysis failed');\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tloadingIndicator.classList.add('hidden');\n\t\t\t\t\tanalyzeBtn.disabled = false;\n\t\t\t\t\tanalyzeBtn.textContent = 'Analyze Code';\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// Show toast notification\n\t\t\tfunction showToast(message) {\n\t\t\t\tconst toast = document.createElement('div');\n\t\t\t\ttoast.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in';\n\t\t\t\ttoast.textContent = message;\n\t\t\t\tdocument.body.appendChild(toast);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttoast.classList.add('animate-fade-out');\n\t\t\t\t\tsetTimeout(() => toast.remove(), 300);\n\t\t\t\t}, 2000);\n\t\t\t}\n\t\t</script> <style>\n\t\t\t@keyframes fade-in {\n\t\t\t\tfrom { opacity: 0; transform: translateY(-10px); }\n\t\t\t\tto { opacity: 1; transform: translateY(0); }\n\t\t\t}\n\t\t\t@keyframes fade-out {\n\t\t\t\tfrom { opacity: 1; transform: translateY(0); }\n\t\t\t\tto { opacity: 0; transform: translateY(-10px); }\n\t\t\t}\n\t\t\t.animate-fade-in {\n\t\t\t\tanimation: fade-in 0.3s ease-out;\n\t\t\t}\n\t\t\t.animate-fade-out {\n\t\t\t\tanimation: fade-out 0.3s ease-out;\n\t\t\t}\n\t\t</style>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = Layout("Review Workspace - "+props.Title).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// RenderAnalysisResult renders the appropriate analysis component based on mode
func RenderAnalysisResult(mode string, result string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var8 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var8 == nil {
			templ_7745c5c3_Var8 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		switch mode {
		case "preview":
			templ_7745c5c3_Err = PreviewModeResult(result).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		case "skim":
			templ_7745c5c3_Err = SkimModeFunctionList([]string{}).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		case "scan":
			templ_7745c5c3_Err = ScanModeSearch().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		case "detailed":
			templ_7745c5c3_Err = DetailedModeLineByLine([]string{}).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		case "critical":
			templ_7745c5c3_Err = CriticalModeIssueList([]CriticalModeIssue{}).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		default:
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "<div class=\"text-gray-700 dark:text-gray-300\"><p class=\"text-sm\">Unknown mode: ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var9 string
			templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(mode)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `apps/review/templates/workspace.templ`, Line: 448, Col: 43}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, "</p><pre class=\"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-xs overflow-auto\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var10 string
			templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(result)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `apps/review/templates/workspace.templ`, Line: 449, Col: 96}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, "</pre></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
